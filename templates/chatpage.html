<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with Zylla</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../static/css/chatpage.css">
</head>
<body id="bd">
    <div class="h1">
        Zylla<small>g_0.1</small>
    </div>
    <p class="p1" id="p1">
        Hi there! ðŸ‘‹It's nice to meet you.
        I'm Zylla, your friendly student assistant chatbot. <br> 
        How can I help you today? ðŸ˜Š Are you looking for information <br> 
        about Landmark College or need help with some research? Let me know! 
    </p>
    <div class="chat-container">
        
        <div class="chat-history" id="chat-history"></div>
        <form class="chat-input" method="post" id="message-form">
            <div class="loader" id="loader"></div>
            <input type="text" id="user-message" name="user-message" placeholder="Type your message here">
            <button id="send-button" type="submit">Send</button>
        </form>
    </div>

    <div class="side-bar" style="color: white; width:5%;" id="side-bar">
        <div class="topOptions">
            <div class="ic" style="margin-top: 30px;" onclick="showBar()"><i class="fa fa-bars " aria-hidden="true" ></i> </div>
            <div class="ic" id="newConvo" style="margin-top: 30px;"><i class="fa fa-plus " ></i> <div style="margin-left: 6px;"  class="hiddenTxt">New Chat</div></div><br>
            <ul style="font-size: 0.8rem; list-style: none; padding: 0; margin: 0; width:90%;">
                <div style="margin-bottom: 12px; font-size:1rem;" class="hiddenTxt">Recent</div>
                <li  class="hiddenTxt convo">
                    <i class="fa fa-comment"></i> Pass conversation.
                </li>
            </ul>
        </div>
        <div class="bottomOptions">
            <div class="ic " id="newConvo"><i class="fa fa-sign-out" onclick="signO()"></i> <div class="hiddenTxt ">Sign-out</div></div><br>
           <div style="margin-bottom: 30px;" onclick="goto('/')" class=" ic " id="newConvo"> <i class="fa fa-home "></i> <div class="hiddenTxt ">Home</div></div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js'
    
        // Add Firebase products that you want to use
        import { getAuth,createUserWithEmailAndPassword,signOut } from 'https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js'
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js'
    
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC6LbV4AJAxbpBlMXtSBz77NgdgInpcl6c",
            authDomain: "lsachatbot.firebaseapp.com",
            projectId: "lsachatbot",
            storageBucket: "lsachatbot.appspot.com",
            messagingSenderId: "817674467330",
            appId: "1:817674467330:web:a97a4b92bc7a8258308f1b"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // Initialize Firebase Authentication and get a reference to the service
        const auth = getAuth(app);

        function signO(){
            auth.signOut()
            .then(() => {
            console.log('Signed out successfully');
            // Update UI to reflect signed-out state (e.g., hide user info, show sign-in button)
            goto('/');
            })
            .catch((error) => {
            console.error('Error signing out:', error);
            // Handle errors
            });
        }

    </script>

    <script>
        const bar = document.getElementById('side-bar');
        const body = document.getElementById('bd');
        function goto(site){
            window.location.assign(site);
        }
        function showBar(){
            let nC = document.getElementById('newConvo');
            let barWidth = bar.style.width;
            let bodyPadding = body.style.paddingLeft;
            let tx = document.getElementsByClassName('hiddenTxt');
            if(barWidth == '5%'){
                bar.style.width = '15%';
                bar.style.alignItems = 'start';
                body.style.paddingLeft = '15%';
                nC.style.width = 'auto';
                for(i=0;i<tx.length;i++){
                    tx[i].style.display = 'block';
                    tx[i].style.width = '100%';
                    
                }
            }else{
                bar.style.width = '5%';
                body.style.paddingLeft = '0';
                bar.style.alignItems = 'center';
                nC.style.width = '30px';
                for(i=0;i<tx.length;i++){
                    tx[i].style.display = 'none';
                    
                }
            }
        }
    </script>
    <script src="../static/js/chatpage.js"></script>
</body>
</html>
